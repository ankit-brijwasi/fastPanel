var gt=Object.defineProperty;var xt=(e,r,n)=>r in e?gt(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var z=(e,r,n)=>(xt(e,typeof r!="symbol"?r+"":r,n),n),bt=(e,r,n)=>{if(!r.has(e))throw TypeError("Cannot "+n)};var G=(e,r,n)=>(bt(e,r,"read from private field"),n?n.call(e):r.get(e)),be=(e,r,n)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,n)};import{s as se,u as t,D as yt,a as Be,b as _t,c as Ye,B as ee,d as f,T as w,S as b,e as Ge,M as wt,f as Ct,g as kt,L as vt,h as Ve,i as E,j as At,k as ft,l as St,m as Ft,n as Dt,o as jt,p as Nt,q as $t,Q as oe,F as Ze,r as Tt,t as j,v as Je,w as Et,N as Pt,x as Oe,y as _,z as Ot,A as Re,I as K,C as Rt,E as Wt,O as Ke,G as Lt,H as te,J as Mt,K as Xe,P as zt,R as qt,U as Ht,V as Ut,W as M,X as Bt,Y as Yt,Z as Gt,_ as Vt,$ as Zt,a0 as Jt,a1 as Kt,a2 as X,a3 as Qe,a4 as Xt,a5 as R,a6 as Ie,a7 as Qt,a8 as It,a9 as er,aa as tr,ab as rr,ac as nr,ad as ge,ae as ye,af as et,ag as ar,ah as _e,ai as we,aj as ir,ak as or,al as tt,am as rt,an as q,ao as We,ap as sr,aq as cr,ar as lr,as as dr,at as de,au as ur,av as Le,aw as hr,ax as H,ay as pr,az as nt,aA as mr,aB as gr,aC as xr}from"./vendor.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const ve=300,Ce=64,ke=114,br=se("main",{shouldForwardProp:e=>e!=="open"})(({theme:e,open:r})=>({flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginTop:`${ke}px`,height:`calc(100vh - ${ke}px)`,...r&&{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})}}));function Ae({dialogTitleChild:e,dialogContentChild:r,dialogActionChild:n,dialogContentProps:a,dialogTitleProps:i,dialogActionProps:o,dialogProps:s}){const{sx:d={},...c}=s||{},{sx:h={},...u}=a||{},{sx:p={},...m}=i||{},{sx:F={},...$}=o||{};return t(Ye,{...c,sx:{"& .MuiDialog-paper":{borderRadius:1,p:"24px 32px"},backgroundColor:"rgba(9, 31, 51, 0.30)",backdropFilter:"blur(1px)",...d},children:[e&&t(yt,{...m,sx:{mb:"8px",p:0,...p},children:e}),r&&t(Be,{...u,sx:{p:0,mb:3,...h},children:r}),n&&t(_t,{...$,sx:{p:0,display:"flex",justifyContent:"space-between",...F},children:n})]})}function W({sx:e,disabled:r,onClick:n,children:a,...i}){const o={variant:"contained",sx:{backgroundColor:(i==null?void 0:i.variant)!=="text"&&(i==null?void 0:i.variant)!=="outlined"?"#2f7ec7":"",borderRadius:"4px",":hover":{backgroundColor:(i==null?void 0:i.variant)!=="text"&&(i==null?void 0:i.variant)!=="outlined"?"#236099":""},...e},disabled:r,onClick:n,...i};return t(ee,{...o,children:a})}const yr=()=>t(b,{justifyContent:"center",alignItems:"center",width:"100%",children:t(f,{children:[t(w,{sx:{fontSize:"20px",lineHeight:"28px",fontWeight:"500",color:"#101828",textAlign:"center",mb:"8px"},children:"Logout"}),t(w,{sx:{fontSize:"16px",lineHeight:"20px",fontWeight:"400",color:" #667085",textAlign:"center",mb:"32px"},children:"Are you sure you want to Logout?"})]})}),_r=({handleClose:e,handleLogout:r,isLoading:n})=>t(b,{direction:"row",justifyContent:"center",width:"100%",children:[t(W,{sx:{fontSize:"16px",fontWeight:"500",lineHeight:"24px",mr:"12px",py:"10px",borderRadius:"8px",width:"300px",maxWidth:"352px"},onClick:e,children:"Cancel"}),t(W,{sx:{fontWeight:"500",lineHeight:"24px",py:"10px",borderRadius:"8px",width:"18.75rem",maxWidth:"352px",backgroundColor:"#d32f2f",":hover":{backgroundColor:"#b72418"}},onClick:r,disabled:n,children:"Logout"})]});function wr({open:e,handleClose:r,handleLogout:n,isLoading:a}){return t(Ae,{dialogProps:{open:e,onClose:()=>{},fullWidth:!0,maxWidth:"xs"},dialogContentChild:t(yr,{}),dialogActionChild:t(_r,{handleLogout:n,isLoading:a,handleClose:r}),dialogContentProps:{sx:{mb:0}}})}function Me({...e}){return t(E,{children:t(vt,{component:Ve,sx:{px:2,py:1,backgroundColor:"primary.hover",display:"grid",placeItems:"center",borderRadius:2,"&:hover":{color:"primary.main"}},...e})})}function Cr(){const r=Ge().pathname.split("/").filter(n=>n);return t(f,{children:t(wt,{"aria-label":"breadcrumb",sx:{mb:3,mt:1,borderRadius:1,maxWidth:"max-content"},separator:t(Ct,{fontSize:"small"}),children:[t(Me,{underline:"hover",color:"inherit",to:"/",children:t(kt,{})}),r.map((n,a)=>{const i=a===r.length-1,o=`/${r.slice(0,a+1).join("/")}`;return i?t(w,{color:"inherit",sx:{px:2,py:1,backgroundColor:"primary.hover",borderRadius:2},children:n.charAt(0).toUpperCase()+n.slice(1)},n):t(Me,{underline:"hover",color:"inherit",to:o,children:n.charAt(0).toUpperCase()+n.slice(1)},o)})]})})}const kr=se(At,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:r})=>({transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),...r&&{width:`calc(100% - ${ve}px)`,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},...!r&&{width:`calc(100% - ${Ce}px)`}})),at=({open:e,height:r})=>{const n=Ge();return t(E,{children:t(kr,{position:"fixed",open:e,elevation:0,sx:{mt:2.5,background:"#fff"},children:t(ft,{sx:{display:"flex",alignItems:"flex-start",flexDirection:"column",maxHeight:r},children:[t(f,{sx:{display:"flex",alignItems:"center"},children:t(w,{component:"h1",fontWeight:600,noWrap:!0,sx:{color:"#000",fontSize:28},children:(i=>i==="/profile"?"Profile":"Apps")(n.pathname)})}),t(Cr,{})]})})})};at.defaultProps={open:!0};const it="/assets/fast-panel-logo-2.png",vr="http://localhost:8000/fastpanel/",Ar="/fastpanel",fr="<FP_BASE_APP_URL>",Sr="<FP_BASE_API_URL>",fe={devApiBaseUrl:vr,devAppBaseUrl:Ar,prodBaseAppUrl:fr,prodBaseApiUrl:Sr},L=fe.prodBaseAppUrl;console.log(L,"App");const N={root:`${L}`,apps:`${L}`,login:`${L}/signin`,models:`${L}/appName`,model:`${L}/:appName/:modelName`,modelObjectEdit:`${L}/:appName/:modelName/:objectId`,profile:`${L}/profile`},Fr=({handleLogoutClick:e,handleProfileClick:r,handleAppsClick:n})=>[{title:"apps",path:N.apps,icon:t(jt,{}),onClickHandler:n||(()=>{}),tooltipText:"Apps"},{title:"profile",path:N.profile,icon:t(Nt,{}),onClickHandler:r||(()=>{}),tooltipText:"Profile"},{title:"logout",path:"",icon:t($t,{}),onClickHandler:e||(()=>{}),tooltipText:"Logout"}],ze=se(e=>t(St,{disableGutters:!0,...e}))(({theme:e})=>({...e.typography.body2,height:48,position:"relative",textTransform:"capitalize",color:e.palette.text.white,borderRadius:e.shape.borderRadius,transition:"color .2s ease",padding:16,gap:12,"&:hover":{color:"#9f9f9f"}})),qe=se(Ft,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:r})=>({width:22,height:22,...!r&&{minWidth:0},color:"inherit",display:"flex",alignItems:"center",justifyContent:"center"})),He=e=>({width:ve,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}),Ue=e=>({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:`${Ce}px`,[e.breakpoints.up("sm")]:{width:`${Ce}px`}}),Dr=se(Dt,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:r})=>({width:ve,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...r&&{...He(e),"& .MuiDrawer-paper":He(e)},...!r&&{...Ue(e),"& .MuiDrawer-paper":Ue(e)}}));class jr{getValue(r){return localStorage.getItem(r)}setValue(r,n){localStorage.setItem(r,n)}remove(r){localStorage.removeItem(r)}}var Q,I;class re extends jr{constructor(){super(...arguments);be(this,Q,"user");be(this,I,"fast-pannel-access-token");z(this,"addUser",n=>this.setValue(G(this,Q),JSON.stringify(n)));z(this,"clearUser",()=>this.remove(G(this,Q)));z(this,"retrieveUser",()=>JSON.parse(this.getValue(G(this,Q))));z(this,"addToken",n=>this.setValue(G(this,I),n));z(this,"clearToken",()=>this.remove(G(this,I)));z(this,"retrieveToken",()=>this.getValue(G(this,I)));z(this,"addData",(n,a)=>{this.addUser(n),this.addToken(a)});z(this,"clearData",()=>{this.clearUser(),this.clearToken()})}}Q=new WeakMap,I=new WeakMap;const Nr=e=>{new re().clearData(),e({type:"signout"})},Se=()=>`Bearer ${new re().retrieveToken()}`,Fe=e=>{e.message!=="canceled"&&Y({severity:"error",title:e==null?void 0:e.message})},Y=({severity:e,title:r,msg:n})=>{switch(e){case"success":oe.success(r);break;case"error":{oe.error(r);break}case"info":oe.info(r);break;case"warning":oe.warning(r);break;default:oe(r)}},ot={user:{},token:"",isAuthenticated:!1},st=Ze({user:ot,dispatch:()=>{}}),$r=e=>{new re().addData(e==null?void 0:e.user,e.token)},Tr=()=>{new re().clearData()},Er=e=>{new re().addData(e.user,e.token)},Pr=(e,r)=>{var n,a;switch(r==null?void 0:r.type){case"signin":return $r(r==null?void 0:r.payload),r==null?void 0:r.payload;case"signout":return Tr(),{user:{},isAuthenticated:!1,token:""};case"update_user":return Er({isAuthenticated:e.isAuthenticated,token:e.token,user:(n=r==null?void 0:r.payload)==null?void 0:n.user}),{...e,user:(a=r==null?void 0:r.payload)==null?void 0:a.user,token:e==null?void 0:e.token}}};function Or({children:e}){const[r,n]=Tt(Pr,ot);return j(()=>{const a=new re;a.retrieveToken()?n({type:"signin",payload:{isAuthenticated:!0,user:a.retrieveUser(),token:a.retrieveToken()||""}}):n({type:"signout"})},[]),t(st.Provider,{value:{user:r,dispatch:n},children:e})}function ne(){const{user:e,dispatch:r}=Je(st);return{user:e,dispatch:r}}function Rr({data:e,open:r,...n}){return t(f,{...n,children:t(Et,{disablePadding:!0,sx:{p:r?1:0},children:e.map(a=>t(Wr,{item:a,open:r},a.title))})})}function Wr({item:e,open:r}){const{title:n,path:a,icon:i,onClickHandler:o,tooltipText:s}=e,{dispatch:d}=ne();return t(E,{children:a?t(Pt,{to:a,style:{textDecoration:"none"},id:"navlink",className:({isActive:c,isPending:h})=>h?"pending":c?"navlink--active":"",children:t(ze,{className:"styled__navitem",onClick:o,sx:{justifyContent:r?"flex-start":"center"},children:[t(qe,{title:s&&s,children:i&&i}),r&&t(Oe,{disableTypography:!0,primary:n})]})}):t(ze,{className:"styled__navitem",sx:{justifyContent:r?"flex-start":"center"},onClick:()=>{o(d)},children:[t(qe,{title:s&&s,children:i&&i}),r&&t(Oe,{disableTypography:!0,primary:n})]})})}const ct=Ze({isLogoutDialogOpen:!1,setIsLogoutDialogOpen:()=>{}});function Lr({children:e}){const[r,n]=_(!1);return t(ct.Provider,{value:{isLogoutDialogOpen:r,setIsLogoutDialogOpen:n},children:e})}function lt(){return Je(ct)}const Mr=({open:e,handleDrawerClose:r,handleDrawerOpen:n})=>{var d,c,h,u,p,m,F,$,D,C,y,g,x,k;const{user:a}=ne(),i=Ot(),{setIsLogoutDialogOpen:o}=lt(),s=Fr({handleLogoutClick:()=>{o(!0)}});return t(f,{position:"relative",children:[t(Dr,{sx:{"& .MuiDrawer-paper":{backgroundColor:"sidebar.dark",overflowY:"visible"}},variant:"permanent",anchor:"left",open:e,children:[t(f,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mt:2},children:[t(Re,{sx:{width:32,height:"auto",...e?{mr:1}:{mx:"auto"}},src:it}),e&&t(w,{component:"h2",sx:{fontSize:"1.5rem",lineHeight:"1.6",textAlign:"center",py:"1.1rem",color:"#fff"},children:"Fast Panel"})]}),t(f,{sx:{px:e?2.5:1,mt:2},children:[t(f,{sx:{py:2,display:"flex",alignItems:"center",...e&&{backgroundColor:"#edeff2",borderRadius:1,px:2.5},justifyContent:"flex-start",mb:3},children:[t(Re,{sx:{backgroundColor:"#673ab7",...e?{mr:1}:{mx:"auto"},cursor:"pointer"},title:((d=a==null?void 0:a.user)==null?void 0:d.first_name)&&((u=(h=(c=a==null?void 0:a.user)==null?void 0:c.first_name)==null?void 0:h.charAt(0))==null?void 0:u.toUpperCase())+((m=(p=a==null?void 0:a.user)==null?void 0:p.first_name)==null?void 0:m.slice(1))||"Admin",children:((D=($=(F=a==null?void 0:a.user)==null?void 0:F.first_name)==null?void 0:$.charAt(0))==null?void 0:D.toUpperCase())||"A"}),e&&t(w,{children:["Hi"," ",((g=(y=(C=a==null?void 0:a.user)==null?void 0:C.first_name)==null?void 0:y.charAt(0))==null?void 0:g.toUpperCase())+((k=(x=a==null?void 0:a.user)==null?void 0:x.first_name)==null?void 0:k.slice(1))||"Admin"," ","ðŸ‘‹"]})]}),t(Rr,{data:s,open:e})]})]}),t(f,{sx:{position:"absolute",bottom:"1rem",right:"-1rem",zIndex:i.zIndex.drawer+1},children:t(K,{onClick:e?r:n,sx:{width:"30px",height:"30px",color:"text.white",border:"1px solid white",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"sidebar.dark",":hover":{backgroundColor:"sidebar.dark"}},children:t(Rt,{sx:{color:"text.white",transition:"transform .5s ease",...e&&{transform:"rotate(180deg)"}}})})})]})};function zr(){const[e,r]=_(!0),{isLogoutDialogOpen:n,setIsLogoutDialogOpen:a}=lt(),i=()=>{r(!0)},o=()=>{r(!1)},{dispatch:s}=ne();return t(f,{sx:{display:"flex",position:"relative"},children:[t(Wt,{}),t(at,{open:e,handleDrawerOpen:i,height:ke}),t(Mr,{open:e,handleDrawerClose:o,handleDrawerOpen:i}),t(br,{open:e,children:t(Ke,{})}),t(wr,{open:n,handleClose:()=>a(!1),handleLogout:()=>{a(!1),Nr(s)}})]})}console.log(fe.prodBaseApiUrl,"Api");const U=Lt.create({baseURL:fe.prodBaseApiUrl,headers:{Authorization:Se()}});U.interceptors.request.use(function(e){const r=Se();return e.headers.Authorization=r||"",e});function V(e){const[r,n]=_(null),[a,i]=_(null),[o,s]=_(!0),[d,c]=_(0),h=()=>c(u=>u+1);return j(()=>{const u=new AbortController;return(async()=>{try{const m=await U({...e,signal:u==null?void 0:u.signal});n(m)}catch(m){i(m)}finally{s(!1)}})(),()=>u.abort()},[d]),j(()=>{a&&Fe(a)},[a]),{response:r,error:a,loading:o,refetch:h}}function De({rows:e,columns:r,tableProps:n,handleRowClick:a,tableContainerProps:i,rowCursorPointer:o,onSelectionModelChange:s,...d}){const c=te(),h=i==null?void 0:i.sx;i==null||delete i.sx;const{sx:u,...p}=d;return t(f,{sx:{width:"100%",height:"100%",...h},...i,children:t(Mt,{onRowClick:({...m})=>a({tableProps:m,navigate:c}),rows:e,columns:r,pageSize:10,rowsPerPageOptions:[10],checkboxSelection:!0,disableSelectionOnClick:!0,experimentalFeatures:{newEditingApi:!0},onSelectionModelChange:m=>{s(m)},sx:{...o&&{"& .MuiDataGrid-row:hover":{cursor:"pointer"}},...u},...p})})}De.defaultProps={handleRowClick:()=>{}};function ae({sx:e}){return t(f,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",...e},children:t(Xe,{})})}const qr="/assets/server-down.svg";function ce(){return t(b,{sx:{width:"100%",height:"100%"},justifyContent:"center",alignItems:"center",className:"error-component__container",children:t(b,{justifyContent:"center",alignItems:"center",children:[t(f,{display:"grid",sx:{placeItems:"center"},children:t(f,{component:"img",src:qr,alt:"something_went_wrong",sx:{maxWidth:400}})}),t(w,{component:"h3",variant:"h4",mt:4,children:"An Error Occured"}),t(w,{component:"p",variant:"body",children:"Refreshing the page might help"})]})})}function Hr({selected:e,handleDelete:r,handleAddClick:n}){const[a,i]=_("");return t(M,{elevation:0,id:"action-container",sx:{border:"1px solid rgba(224, 224, 224, 1)",borderRadius:"4px",py:".5rem",px:".5rem",display:"flex",alignItems:"center",justifyContent:"space-between",mb:".5rem"},children:[t(f,{children:[t(zt,{sx:{minWidth:"300px"},children:t(qt,{sx:{".MuiSelect-select":{py:"8px",px:"4px"}},labelId:"delete-records",id:"delete-records",value:a,onChange:s=>{i(s.target.value)},children:t(Ht,{value:"delete",children:"Delete Records"})})}),t(W,{disabled:a===""||!(e!=null&&e.length),disableElevation:!0,sx:{ml:"1rem"},onClick:r,children:"Go"})]}),t(W,{sx:{ml:"1rem"},onClick:n,startIcon:t(Ut,{}),children:"Add"})]})}function Ur({message:e,show:r,...n}){return t(Bt,{sx:{color:"#fff",zIndex:n.componentLevel?2:a=>a.zIndex.drawer+1},open:r,children:t(M,{sx:{width:{xs:"280px",sm:"340px",md:"440px"},height:{xs:"150px",sm:"190px",md:"250px"},display:"flex",flexFlow:"nowrap column",justifyContent:"center",alignItems:"center",p:"20px"},elevation:0,children:[t(w,{component:"span",sx:{fontWeight:"500",fontSize:"20px",lineHeight:"26px",textAlign:"center",color:"#0F0F0F",mb:"16px"},children:e}),t(Xe,{sx:{"& .MuiCircularProgress-svg":{color:"rgba(44, 169, 227, 1)"}}})]})})}var je={},Br=Gt;Object.defineProperty(je,"__esModule",{value:!0});var dt=je.default=void 0,Yr=Br(Yt()),Gr=Vt;dt=je.default=(0,Yr.default)((0,Gr.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");const Vr=(e,r)=>{var n,a;return e!=null&&e.properties?Object.entries(e.properties).map(([i,o])=>({fieldName:i,required:Array.isArray(e.required)&&e.required.length>0&&e.required.includes(i),...o})).filter(i=>!0):(n=e==null?void 0:e.items)!=null&&n.properties?Object.entries((a=e.items)==null?void 0:a.properties).map(([i,o])=>{var s;return{fieldName:i,required:Array.isArray(e.required)&&e.required.length>0&&e.required.includes(i),value:Array.isArray(e==null?void 0:e.value)&&r!==void 0&&((s=e==null?void 0:e.value)!=null&&s.length)?e==null?void 0:e.value[r][i]:"",...o}}).filter(i=>!0):[]};function Zr({fieldsInfo:e,setFormElements:r,customAttributeValue:n,customIdValue:a,index:i,sx:o}){const[s,d]=_(Vr(e,i));return t(b,{sx:{...o},children:t(Zt,{elevation:0,sx:{border:"1px solid #c4c4c4"},children:[t(Jt,{expandIcon:t(dt,{}),"aria-controls":"embedded-fields",children:t(w,{textTransform:"capitalize",children:["Add ",e==null?void 0:e.fieldName," "]})}),t(Kt,{children:s.map((c,h)=>t(Ne,{fieldInfo:c,mode:"create",customAttributeValue:n,customIdValue:a,setFormElements:r},h))})]})})}function Jr({datestring:e,...r}){const[n,a]=_(X(e).format("YYYY-MM-DDTHH:mm:ss.SSS")||"");return t(Ie,{dateAdapter:Qe,children:t(Xt,{value:n,onChange:o=>{a(X(o).format("YYYY-MM-DDTHH:mm:ss.SSS"))},renderInput:o=>t(R,{...o}),ampm:!1,inputFormat:"YYYY-MM-DDTHH:mm:ss.SSS",...r})})}function Kr({datestring:e}){const[r,n]=_(X(e)||"");return t(Ie,{dateAdapter:Qe,children:t(Qt,{inputFormat:"MM/DD/YYYY",value:r,onChange:i=>{n(i)},renderInput:i=>t(R,{...i})})})}const ue=It((e,r)=>{const{value:n}=e,[a,i]=_(n||null),o=s=>{i(s.target.value)};return t(R,{inputProps:{style:{padding:"8px"}},inputRef:r,placeholder:e==null?void 0:e.name,InputLabelProps:{shrink:!0},InputProps:{sx:{p:0}},...e,required:e==null?void 0:e.required,value:a,onChange:o})}),he={string:{component:ue,props:{type:"text",sx:{fullWidth:!0}},type:"string"},integer:{component:ue,props:{type:"number",sx:{fullWidth:!0}},type:"integer"},float:{component:ue,props:{type:"number",sx:{fullWidth:!0}},type:"float"},boolean:{component:rr,props:{},type:"boolean"},EmailStr:{component:ue,props:{type:"email",sx:{fullWidth:!0}},type:"email"},"date-time":{component:Jr,props:{},type:"datetime"},date:{component:Kr,props:{},type:"date"}},Xr=e=>{var r,n;if(e!=null&&e.anyOf){const a=(r=e==null?void 0:e.anyOf)==null?void 0:r.filter(o=>o==null?void 0:o.format),i=he[(n=a[0])==null?void 0:n.format]||he.string;return{...i,props:{...i==null?void 0:i.props,name:e==null?void 0:e.fieldName}}}else return he[e==null?void 0:e.type]||he.string},Qr=({fieldInfo:e,customAttributeValue:r,setFormElements:n,customIdValue:a,mode:i})=>{const o=Xr(e),[s,d]=_(1);return({...h})=>{const u=o==null?void 0:o.component;if((e.type&&(e.type==="object"||e.type==="object")||e.bsonType&&(e.bsonType==="array"||e.bsonType==="array"))&&e.relation_type){if(e.relation_type==="embeded")return t(f,{children:[[...new Array(s).keys()].map((p,m)=>t(f,{mt:2,sx:{display:"flex"},children:[t(Zr,{fieldsInfo:e,setFormElements:n,sx:{flex:1,mr:2},customIdValue:er(),customAttributeValue:e==null?void 0:e.fieldName,index:m}),t(K,{onClick:()=>{d(F=>F>0?F-1:0)},children:t(tr,{})})]},m)),t(ee,{fullWidth:!0,variant:"outlined",sx:{mt:2},onClick:()=>d(p=>p+1),children:"Add Field"})]});e.relation_type}switch(o==null?void 0:o.type){case"datetime":return t(u,{...o==null?void 0:o.props,datestring:e==null?void 0:e.value,InputProps:{name:e==null?void 0:e.fieldName},inputProps:{...r&&{"data-efield":r,"data-belongs-to":a}},ref:p=>{n(p)}});case"date":return t(u,{...o==null?void 0:o.props,datestring:e==null?void 0:e.value,InputProps:{name:e==null?void 0:e.fieldName},inputProps:{...r&&{"data-efield":r,"data-belongs-to":a}},ref:p=>{n(p)}});case"boolean":return t(u,{...o==null?void 0:o.props,defaultChecked:e==null?void 0:e.value,name:e==null?void 0:e.fieldName,ref:p=>{n(p)},inputProps:{...r&&{"data-efield":r,"data-belongs-to":a}},required:e==null?void 0:e.required});case"string":return(e==null?void 0:e.fieldName)==="_id"||(e==null?void 0:e.fieldName)==="id"?t(u,{...o==null?void 0:o.props,name:e==null?void 0:e.fieldName,value:a,disabled:!0,ref:p=>{n(p)},inputProps:{...r&&{"data-efield":r,"data-belongs-to":a}},required:e==null?void 0:e.required}):t(u,{...o==null?void 0:o.props,name:e==null?void 0:e.fieldName,value:e==null?void 0:e.value,ref:p=>{n(p)},inputProps:{...r&&{"data-efield":r,"data-belongs-to":a}},required:e==null?void 0:e.required});default:return t(u,{...o==null?void 0:o.props,name:e==null?void 0:e.fieldName,value:e==null?void 0:e.value,ref:p=>{n(p)},inputProps:{...r&&{"data-efield":r,"data-belongs-to":a}},required:e==null?void 0:e.required})}}};function B({data:e,embeddedFieldName:r,formFieldName:n,fieldValue:a,customIdValue:i,isArray:o}){let s=[];if(e&&r!==null&&o)return e[r].length?(s=e[r].map(d=>d._id===i?{...d,[n]:a}:d),e[r]=s,e):(e[r]=[...e[r],{[n]:a}],e);if(e&&r!==null)return e[r][n]=a,e;if(e)return e[n]=a,e}const ut=(e,r)=>{var i,o,s,d,c,h,u,p,m,F,$,D;let n={},a=0;for(let C=0;C<r.length;C++){const y=e[a],g=y.name,x=y.getAttribute("data-efield");if(!(((i=r[C])==null?void 0:i.type)==="object"||((o=r[C])==null?void 0:o.bsonType)==="object"))if(((s=r[C])==null?void 0:s.type)==="array"||((d=r[C])==null?void 0:d.bsonType)==="array"){n[x]=[];for(let k in(h=(c=r[C])==null?void 0:c.items)==null?void 0:h.properties){const S=e[a],T=S==null?void 0:S.name,Z=S.getAttribute("data-efield"),J=S.getAttribute("data-belongs-to");switch(S.type){case"checkbox":{n[T]=S.checked;break}case"tel":{const P=S.value.trim();if(P==="")return{data:n,error:`${T} can't be empty`};B({data:n,embeddedFieldName:Z,formFieldName:T,fieldValue:P,customIdValue:J,isArray:!0});break}case"number":{const P=S.value.trim();if(P==="")return{data:n,error:`${T} can't be empty`};if(!isNaN(Number(P))){const ie=Number(P);B({data:n,embeddedFieldName:Z,formFieldName:T,fieldValue:ie,customIdValue:J,isArray:!0})}break}default:{const P=(u=S.value)==null?void 0:u.trim();if(P===""&&((p=r[C])!=null&&p.required))return{data:n,error:`${T} can't be empty`};P===""&&!((m=r[C])!=null&&m.required)&&r[C].connected_with?B({data:n,embeddedFieldName:Z,formFieldName:T,fieldValue:null,customIdValue:J,isArray:!0}):P!==null&&B({data:n,embeddedFieldName:Z,formFieldName:T,fieldValue:P,customIdValue:J,isArray:!0});break}}a++}}else switch(y.type){case"checkbox":{n[g]=y.checked;break}case"tel":{const k=y.value.trim();if(k==="")return{data:n,error:`${g} can't be empty`};B({data:n,embeddedFieldName:x,formFieldName:g,fieldValue:k,isArray:!1});break}case"number":{const k=y.value.trim();if(k==="")return{data:n,error:`${g} can't be empty`};if(!isNaN(Number(k))){const S=Number(k);B({data:n,embeddedFieldName:x,formFieldName:g,fieldValue:S,isArray:!1})}break}default:{const k=(F=y.value)==null?void 0:F.trim();if(k===""&&(($=r[C])!=null&&$.required))return{data:n,error:`${g} can't be empty`};k===""&&!((D=r[C])!=null&&D.required)&&r[C].connected_with?B({data:n,embeddedFieldName:x,formFieldName:g,fieldValue:null,isArray:!1}):k!==null&&B({data:n,embeddedFieldName:x,formFieldName:g,fieldValue:k,isArray:!1});break}}a++}return Object.keys(n).map(C=>{Array.isArray(n[C])&&(n[C]=n[C].map(y=>{const{_id:g,...x}=y;return x}))}),{data:n,error:null}};function Ir(e){return new RegExp("^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?(Z)?$").test(e)}const en=(e,r)=>{let n={};return Object.keys(r).forEach(a=>{if(Ir(e[a])){X(e[a]).format("YYYY-MM-DDTHH:mm:ss")!==X(r[a]).format("YYYY-MM-DDTHH:mm:ss")&&(n[a]=X(e[a]).format("YYYY-MM-DDTHH:mm:ss"));return}else if(a!=="_id"&&a!=="id"&&r[a]!==e[a]&&r[a]!==void 0){n[a]=e[a];return}}),n},tn=e=>{var r,n,a;return(e==null?void 0:e.fieldName)==="_id"||(e==null?void 0:e.fieldName)==="id"?"ID":((n=(r=e==null?void 0:e.fieldName)==null?void 0:r.charAt(0))==null?void 0:n.toUpperCase())+((a=e==null?void 0:e.fieldName)==null?void 0:a.slice(1))};function rn({fieldInfo:e,mode:r,customAttributeValue:n,customIdValue:a,setFormElements:i}){const o=Qr({fieldInfo:e,mode:r,customAttributeValue:n,setFormElements:i,customIdValue:a});return t(b,{direction:"row",alignItems:"center",children:t(b,{mb:2,width:"100%",children:[t(w,{fontWeight:400,color:"text.grey",sx:{width:"160px",wordWrap:"break-word",mr:".8rem",mb:1},children:tn(e)}),t(o,{name:e==null?void 0:e.fieldName,customAttributeValue:n,mode:r})]})})}const Ne=nr(rn),nn="/auth/login",an={url:"/core/fetch-models",method:"GET"},on={url:"/core/models/objects/",method:"GET"},sn={url:"/core/models/objects/",method:"GET"},cn={url:"/core/models/objects/",method:"PATCH"},ln={url:"/core/models/objects/",method:"POST"},dn={url:"/core/models/objects/attributes",method:"GET"},un={url:"/core/models/objects/",method:"DELETE"},l={signin:nn,apps_get:an,model_get:on,model_objects_get:sn,models_objects_patch:cn,models_objects_post:ln,model_objects_attribute_get:dn,models_objects_delete:un};function xe({disableErrorNotification:e}={}){const[r,n]=_(null),[a,i]=_(null),[o,s]=_(!1),[d,c]=_(null),h=async u=>{try{s(!0);const p=new AbortController;c(p);const m=await U({...u,signal:p==null?void 0:p.signal});n(m)}catch(p){i(p)}finally{s(!1)}};return j(()=>()=>d&&(d==null?void 0:d.abort()),[d]),j(()=>{a&&!e&&Fe(a)},[a]),{mutationResponse:r,mutationError:a,mutationLoading:o,axiosFetch:h}}function hn({handleCreateDialogClose:e,handleRefreshModelDocuments:r}){var D,C;const{modelName:n,appName:a}=ge(),[i,o]=_([]),{response:s,error:d,loading:c}=V({url:`${(D=l==null?void 0:l.model_objects_attribute_get)==null?void 0:D.url}?app_name=${a}&model_name=${n}`,method:(C=l==null?void 0:l.model_objects_attribute_get)==null?void 0:C.method}),{mutationResponse:h,mutationLoading:u,axiosFetch:p}=xe(),m=ye([]),F=et(y=>{y&&(m.current=Array.from(new Set([...m.current,y])))},[]);j(()=>{var y,g;s&&Object.keys((y=s==null?void 0:s.data)==null?void 0:y.properties).length>0&&o(Object.entries((g=s.data)==null?void 0:g.properties).map(([x,k])=>{var S;return{fieldName:x,required:(S=s.data)==null?void 0:S.required.includes(x),...k}}).filter(x=>(x==null?void 0:x.fieldName)!=="id"&&(x==null?void 0:x.fieldName)!=="_id"))},[s]),j(()=>{h&&h.status===200&&(Y({severity:"success",title:"Record Successfully Added"}),e(),r())},[h]);const $=async y=>{var x,k;y.preventDefault();const g=ut(m.current,i);console.log(g,"validated data"),g!=null&&g.error?Y({severity:"error",title:g==null?void 0:g.error}):await p({axiosInstance:U,method:(x=l==null?void 0:l.models_objects_post)==null?void 0:x.method,url:(k=l==null?void 0:l.models_objects_post)==null?void 0:k.url,data:{data:g==null?void 0:g.data,app:a,model:n}})};return t(M,{elevation:0,sx:{width:"100%",height:"100%"},id:"Create-Container",children:c?t(ae,{sx:{height:"calc(100% - 85px)"}}):t(M,{elevation:0,children:[t(w,{fontSize:20,fontWeight:600,textAlign:"center",mb:4,children:"Add Record"}),d?t(ce,{}):t(E,{children:[t(f,{sx:{borderRadius:"8px",mt:".5rem"},children:i.map(y=>t(Ne,{fieldInfo:y,mode:"create",setFormElements:F}))}),t(b,{direction:"row",gap:2,mt:4,children:t(W,{disabled:u,onClick:y=>{$(y)},fullWidth:!0,children:"Createsss"})})]})]})})}function pn({handleClose:e,handleRefreshModelDocuments:r}){return t(hn,{handleCreateDialogClose:e,handleRefreshModelDocuments:r})}function mn({open:e,handleClose:r,handleRefreshModelDocuments:n}){return t(Ae,{dialogProps:{open:e,onClose:r||(()=>{}),fullWidth:!0,maxWidth:"sm"},dialogContentChild:t(pn,{handleClose:r,handleRefreshModelDocuments:n}),dialogContentProps:{sx:{mb:0}}})}const gn=(e,r)=>e?Object.keys(e).map(n=>r[n]?{field:n,headerName:n,...r[n]}:{field:n,headerName:n}):[],xn=e=>e?e==null?void 0:e.map(r=>({id:r==null?void 0:r._id,...r})):[],bn={_id:{headerName:"ID",flex:1},username:{headerName:"Username",flex:1},email:{headerName:"Email",flex:1},first_name:{headerName:"First Name",flex:1},last_name:{headerName:"Last Name",flex:1},date_joined:{headerName:"Date Joined",flex:1},last_login:{headerName:"Last Login",flex:1},is_active:{headerName:"Is Active"}},yn=async(e,r,n)=>{var a,i;try{await U({method:(a=l==null?void 0:l.models_objects_delete)==null?void 0:a.method,url:`${(i=l==null?void 0:l.models_objects_delete)==null?void 0:i.url}${e}?app_name=${r}&model_name=${n}`})}catch(o){Fe(o)}};function _n(){var y,g;const{modelName:e,appName:r}=ge(),[n,a]=_([]),{response:i,error:o,loading:s,refetch:d}=V({url:`${(y=l==null?void 0:l.model_get)==null?void 0:y.url}?app_name=${r}&model_name=${e}`,method:(g=l==null?void 0:l.model_get)==null?void 0:g.method}),[c,h]=_(!1),[u,p]=_([]),[m,F]=_([]),[$,D]=_(!1),C=async x=>{D(!0);for(let k=0;k<n.length;k++)await yn(n[k],r,e);D(!1),Y({severity:"success",title:"Operation Successfully Executed"}),d()};return j(()=>{i&&(p(gn(i.data[0],bn)),F(xn(i==null?void 0:i.data)))},[i]),t(M,{elevation:0,sx:{height:"100%"},id:"model-container",children:[s?t(ae,{sx:{height:"calc(100% - 85px)"}}):t(E,{children:o?t(ce,{}):t(b,{sx:{height:"100%"},children:[t(Hr,{selected:n,handleDelete:C,handleAddClick:()=>h(!0)}),t(De,{onSelectionModelChange:x=>{a(x)},tableContainerProps:{sx:{flex:1}},selectionModel:n,rows:m,columns:u,handleRowClick:({tableProps:x,navigate:k})=>{var S;window.opener&&(window.opener.postMessage((S=x==null?void 0:x.row)==null?void 0:S.id,"*"),window.close()),k(`${x==null?void 0:x.id}`)}})]})}),t(Ur,{show:$,message:"Performing Action..."}),t(mn,{handleClose:()=>h(!1),handleRefreshModelDocuments:d,open:c})]})}function ht({appName:e,models:r,displayName:n}){const a=te(),i=(c,h,u)=>{c.stopPropagation(),a(`${h}/${u}`)},o=(c,h,u)=>{c.stopPropagation(),a(`${h}/${u}`)},s=(c,h,u)=>{a(`${h}/${u}`)},d=(c,h)=>{a(`${h}`)};return t(or,{sx:{width:"clamp(300px,25%,350px)",minWidth:"300px",border:"2px solid transparent",transition:"border .3s  ease",":hover":{boxShadow:"rgb(159 162 191 / 18%) 0px 5px 16px, rgb(159 162 191 / 32%) 0px 2px 2px;",border:"2px solid transparent",borderColor:"primary.main"},display:"flex",flexFlow:"column wrap"},children:[t(ar,{children:[t(w,{variant:"h5",sx:{backgroundColor:"sky_blue.main",p:"1rem",borderRadius:"8px",mb:"1rem",textTransform:"capitalize",cursor:"pointer"},onClick:c=>{d(c,e)},title:"Open Your App",children:n}),t(b,{children:r.length>3?r.slice(0,3).map(c=>t(b,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{cursor:"pointer",p:".5rem 1rem",borderRadius:"8px",border:"1px solid transparent",":hover":{boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)"}},onClick:h=>s(h,e,c==null?void 0:c.name),children:[t(w,{variant:"body2",children:c==null?void 0:c.name}),t(f,{children:[t(K,{onClick:h=>i(h,e,c==null?void 0:c.name),children:t(_e,{fontSize:"small"})}),t(K,{onClick:h=>o(h,e,c==null?void 0:c.name),children:t(we,{fontSize:"small"})})]})]})):r.map(c=>t(b,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{cursor:"pointer",p:".5rem 1rem",borderRadius:"8px",":hover":{backgroundColor:"sky_blue.main"}},onClick:h=>s(h,e,c==null?void 0:c.name),children:[t(w,{variant:"body2",children:c==null?void 0:c.name}),t(f,{children:[t(K,{onClick:h=>i(h,e,c==null?void 0:c.name),children:t(_e,{fontSize:"small"})}),t(K,{onClick:h=>o(h,e,c==null?void 0:c.name),children:t(we,{fontSize:"small"})})]})]}))})]}),(r==null?void 0:r.length)>2?t(ir,{sx:{mt:"auto"},children:t(W,{variant:"text",sx:{m:"auto"},onClick:c=>d(c,e),children:"Show More"})}):t(E,{})]})}ht.defaultProps={appName:"App Name",models:[{modelName:"Test"}]};function wn(){var i,o;const{response:e,loading:r}=V({url:(i=l==null?void 0:l.apps_get)==null?void 0:i.url,method:(o=l==null?void 0:l.apps_get)==null?void 0:o.method,headers:{Authorization:Se()}}),[n,a]=_([]);return j(()=>{e&&a(e.data)},[e]),t(M,{elevation:0,sx:{width:"100%",height:"100%"},children:r?t(ae,{sx:{height:"calc(100% - 85px)"}}):t(E,{children:t(b,{direction:"row",gap:"24px",flexWrap:"wrap",children:n==null?void 0:n.filter(s=>{var d;return((d=s==null?void 0:s.models)==null?void 0:d.length)>0}).map(s=>{var d,c;return t(ht,{appName:s==null?void 0:s.app_name,displayName:(c=(d=s.app_name)==null?void 0:d.split("."))==null?void 0:c.pop(),models:s==null?void 0:s.models})})})})})}function pt({title:e,icon:r,clickHandler:n,...a}){return t(W,{startIcon:r,onClick:i=>{n(i)},...a,children:e})}function Cn({children:e,...r}){return t(Ve,{to:r==null?void 0:r.linkTo,style:{textDecoration:"none"},children:t(w,{...r,children:e})})}const kn=({linkTo:e})=>{const r=te();return t(pt,{icon:t(_e,{}),title:"Add",clickHandler:n=>{r(e)}})},vn=({linkTo:e})=>{const r=te();return t(pt,{icon:t(we,{}),title:"Edit",clickHandler:()=>{r(e)}})},An=({name:e,link:r})=>t(Cn,{linkTo:r,children:e}),fn=(e,r)=>{let n=[{name:"add"},{name:"edit"}];return Object.keys(e[0]).map(a=>{a!=="import_path"&&n.unshift({name:a})}),e?n.map(a=>r[a==null?void 0:a.name]?{field:a.name,...r[a==null?void 0:a.name]}:{field:a.name}):[]},Sn=e=>e?e==null?void 0:e.map((r,n)=>({id:n,...r})):[],Fn={name:{field:"Model Name",headerName:"Model Name",flex:1,renderCell:({...e})=>{var r,n;return t(An,{link:`${(r=e==null?void 0:e.row)==null?void 0:r.name}`,name:(n=e==null?void 0:e.row)==null?void 0:n.name})}},add:{headerName:"Add Object",sortable:!1,flex:1,renderCell:({...e})=>{var r;return t(kn,{linkTo:`${(r=e==null?void 0:e.row)==null?void 0:r.name}`})}},edit:{headerName:"Edit Object",sortable:!1,flex:1,renderCell:({...e})=>{var r;return t(vn,{linkTo:`${(r=e==null?void 0:e.row)==null?void 0:r.name}`})}}};function Dn(){var c,h;const{appName:e}=ge(),{response:r,error:n,loading:a}=V({url:`${(c=l==null?void 0:l.apps_get)==null?void 0:c.url}?app_name=${e}`,method:(h=l==null?void 0:l.apps_get)==null?void 0:h.method}),[i,o]=_([]),[s,d]=_([]);return j(()=>{var u,p;r&&(o(fn((u=r.data[0])==null?void 0:u.models,Fn)),d(Sn((p=r.data[0])==null?void 0:p.models)))},[r]),t(b,{sx:{width:"100%",height:"100%"},children:a?t(ae,{sx:{height:"calc(100% - 85px)"}}):t(E,{children:n?t(ce,{}):t(De,{rows:s,columns:i,checkboxSelection:!1,sx:{maxWidth:"min(100%,1000px)"},tableContainerProps:{sx:{flex:1}}})})})}function jn({...e}){const{user:r,dispatch:n}=ne(),{mutationResponse:a,mutationLoading:i,axiosFetch:o}=xe(),[s,d]=_({username:"",password:""}),c=te(),h=async u=>{u.preventDefault();const p=new FormData;p.append("username",s==null?void 0:s.username),p.append("password",s==null?void 0:s.password),o({axiosInstance:U,method:"POST",url:l.signin,data:p})};return j(()=>{var u,p;(a==null?void 0:a.status)===200&&(n({type:"signin",payload:{isAuthenticated:!0,user:(u=a==null?void 0:a.data)==null?void 0:u.user,token:(p=a.data)==null?void 0:p.access_token}}),c(L))},[a]),t(E,{children:r!=null&&r.isAuthenticated?t(rt,{to:L}):t(tt,{maxWidth:"xs",sx:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:t(f,{sx:{display:"flex",flexDirection:"column",alignItems:"center",transform:"translateY(-50%)"},children:[t("img",{src:it,alt:"logo",style:{width:"50px",height:"50px",marginBottom:"1rem"}}),t(w,{component:"h1",variant:"h5",sx:{},children:"Fast Pannel"}),t(w,{component:"span",sx:{fontStyle:"italic",color:"text.grey"},children:"Sign In"}),t(f,{component:"form",onSubmit:h,noValidate:!0,sx:{mt:1},children:[t(R,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:s==null?void 0:s.username,onChange:u=>d(p=>{var m;return{...p,username:(m=u==null?void 0:u.target)==null?void 0:m.value}})}),t(R,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:s==null?void 0:s.password,onChange:u=>d(p=>{var m;return{...p,password:(m=u==null?void 0:u.target)==null?void 0:m.value}})}),t(ee,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:i,children:"Sign In"})]})]})})})}const pe={email:q().email("Invalid Email Address").required("This Field is Required"),first_name:q().required("This is Required").matches(/^(?=.{2,40}$)[a-zA-Z]+(?:[-'s][a-zA-Z]+)*$/,"Must contain only alphabets and length > 2 and < 40"),last_name:q().required("This is Required").matches(/^(?=.{2,40}$)[a-zA-Z]+(?:[-'s][a-zA-Z]+)*$/,"Must contain only alphabets and length > 2 and < 40"),username:q().matches(/^(?=[a-zA-Z0-9._]{5,20}$)(?!.*[_.]{2})[^_.].*[^_.]$/,"Username must be 5-20 characters long and not includes  __ or _. or ._ or .."),password:q().required("This Field is Required").min(4,"Can't be less than 4 characters").max(16,"Can't be greater than 16 characters"),password1:q().required("This Field is Required").min(4,"Can't be less than 4 characters").max(16,"Can't be greater than 16 characters"),password2:q().required("This Field is Required").min(4,"Can't be less than 4 characters").max(16,"Can't be greater than 16 characters"),purpose:q().required("This Field is Required").min(2).max(100),numberOfCredits:We().required("This Field is Required").min(1,"Should be greater than or equal to 1").max(5e4),totalPrice:We().required("This Field is Required").moreThan(0,"Should be greater than 0$"),selectedService:q().required("Please Select a Service")},mt=({children:e,variant:r,...n})=>{const{submitForm:a}=sr(),i=()=>{a()},o=n==null?void 0:n.sx;n==null||delete n.sx;const s={onClick:i,sx:{backgroundColor:r==="contained"?"#2f7ec7":"unset",mt:"32px",":hover":{backgroundColor:r==="contained"?"#1f5c94":"unset",color:r==="contained"?"#fff":"unset"},color:r==="contained"?"#fff":"unset",maxHeight:"64px",padding:"15px",borderRadius:"5px",...o},disableElevation:!0,...n};return t(ee,{...s,variant:r,children:e})};mt.defaultProps={variant:"contained"};const me=({name:e,...r})=>{const[n,a]=cr(e||""),i={...n,fullWidth:!0,...r};return a&&a.touched&&a.error&&(i.error=!0,i.helperText=a.error),t(R,{...i})},Nn=lr().shape({first_name:pe.first_name,last_name:pe.last_name,email:pe.email,username:pe.username});function $n(e){const[r,n]=_(!1),a={first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",username:e.username||""},i=()=>{n(!0)},o=()=>{n(!1)};return t(ur,{enableReinitialize:!0,initialValues:a,validationSchema:Nn,onSubmit:async(s,{setSubmitting:d})=>{d(!0),await e.updateProfileHandler({first_name:(s==null?void 0:s.first_name)||null,last_name:(s==null?void 0:s.last_name)||null,email:(s==null?void 0:s.email)||null,username:(s==null?void 0:s.username)||null}),d(!1),o()},children:({isSubmitting:s,isValid:d})=>t(dr,{children:[t(ee,{sx:{color:"#2F7EC7",fontSize:"14px",fontWeight:"500",textTransform:"none"},onClick:i,children:"Edit"}),t(Ye,{open:r,onClose:o,children:t(M,{sx:{width:"100%"},children:t(Be,{children:t(b,{direction:"column",alignItems:"flex-start",spacing:3,children:[t(b,{direction:"column",alignItems:"flex-start",spacing:1,children:[t(de,{sx:{fontSize:"16px",fontWeight:"400",color:"#898989"},children:"First Name"}),t(me,{type:"text",name:"first_name",variant:"filled",InputProps:{disableUnderline:!0,sx:{background:"transparent",":hover":{borderRadius:"8px"}}},sx:{width:"532px",background:"transparent","& input":{borderRadius:"8px",border:"1px solid #E0E0E0",padding:"12px",background:"#F6F6F6"}}})]}),t(b,{direction:"column",alignItems:"flex-start",spacing:1,children:[t(de,{sx:{fontSize:"16px",fontWeight:"400",color:"#898989"},children:"Last Name"}),t(me,{type:"text",name:"last_name",variant:"filled",InputProps:{disableUnderline:!0,sx:{background:"transparent",":hover":{borderRadius:"8px"}}},sx:{width:"532px",background:"transparent","& input":{borderRadius:"8px",border:"1px solid #E0E0E0",padding:"12px",background:"#F6F6F6"}}})]}),t(b,{direction:"column",alignItems:"flex-start",spacing:1,children:[t(de,{sx:{fontSize:"16px",fontWeight:"400",color:"#898989"},children:"Email"}),t(me,{type:"email",name:"email",variant:"filled",InputProps:{disableUnderline:!0,sx:{background:"transparent",":hover":{borderRadius:"8px"}}},sx:{width:"532px",background:"transparent","& input":{borderRadius:"8px",border:"1px solid #E0E0E0",padding:"12px",background:"#F6F6F6"}}})]}),t(b,{direction:"column",alignItems:"flex-start",spacing:1,children:[t(de,{sx:{fontSize:"16px",fontWeight:"400",color:"#898989"},children:"Username"}),t(me,{type:"text",name:"username",variant:"filled",InputProps:{disableUnderline:!0,sx:{background:"transparent",":hover":{borderRadius:"8px"}}},sx:{width:"532px",background:"transparent","& input":{borderRadius:"8px",border:"1px solid #E0E0E0",padding:"12px",background:"#F6F6F6"}}})]}),t(b,{sx:{width:"100%"},direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[t(ee,{sx:{fontSize:"16px",fontWeight:"500",color:"#959595",textTransform:"none"},onClick:o,children:"Cancel"}),t(mt,{disableElevation:!0,disabled:!d||s,sx:{mt:0,minWidth:"100px",p:"8px 12px"},children:"Save"})]})]})})})})]})})}function Tn({firstName:e,lastName:r,username:n,email:a,lastLogin:i,createdOn:o,updateProfile:s}){return t(E,{children:t(tt,{maxWidth:!1,style:{padding:"0",boxShadow:"0px 3px 20px 4px rgba(0, 0, 0, 0.04)"},children:t(M,{elevation:0,sx:{width:"100%",padding:"32px"},children:[t(b,{direction:"column",spacing:1,sx:{borderBottom:" 1px solid #EAEAEA",pb:"8px"},children:[t(w,{fontSize:"20px",fontWeight:"500",color:"#0F0F0F",children:"Personal info"}),t(w,{fontSize:"14px",fontWeight:"500",color:"#898989",children:"View & update your personal details here"})]}),t(b,{direction:"row",alignItems:"flex-start",children:[t(b,{spacing:2,sx:{my:"38px",width:{lg:"80%",xl:"60%"}},children:[t(b,{direction:"row",alignItems:"center",sx:{width:"100%"},children:[t(w,{fontSize:"16px",width:"45%",fontWeight:"400",color:"#898989",children:"Name"}),t(b,{direction:"row",gap:2,sx:{width:"100%"},children:[t(R,{type:"text",disabled:!0,value:e||"-",id:"first-name",inputProps:{style:{padding:"10px",fontSize:"16px",color:"#0F0F0F"}},sx:{borderRadius:"5px",backgroundColor:"#F6F6F6",borderColor:"#E0E0E0",width:"50%"}}),t(R,{type:"text",disabled:!0,value:r||"-",id:"last-name",inputProps:{style:{padding:"10px",fontSize:"16px",color:"#0F0F0F"}},sx:{borderRadius:"5px",backgroundColor:"#F6F6F6",borderColor:"#E0E0E0",width:"50%"}})]})]}),t(b,{direction:"row",alignItems:"center",children:[t(w,{fontSize:"16px",width:"45%",fontWeight:"400",color:"#898989",children:"Email address"}),t(R,{disabled:!0,type:"email",id:"email",value:a||"-",inputProps:{style:{padding:"10px",fontSize:"16px",color:"#0F0F0F"}},sx:{borderRadius:"5px",backgroundColor:"#F6F6F6",borderColor:"#E0E0E0",width:"100%"}})]}),t(b,{direction:"row",alignItems:"center",children:[t(w,{fontSize:"16px",width:"45%",fontWeight:"400",color:"#898989",children:"Username"}),t(R,{disabled:!0,type:"email",id:"username",value:n||"-",inputProps:{style:{padding:"10px",fontSize:"16px",color:"#0F0F0F"}},sx:{borderRadius:"5px",backgroundColor:"#F6F6F6",borderColor:"#E0E0E0",width:"100%"}})]}),t(b,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[t(w,{fontSize:"16px",fontWeight:"400",color:"#898989",width:"45%",children:"Password"}),t(R,{inputProps:{style:{padding:"10px",fontSize:"16px",color:"#0F0F0F"}},type:"password",sx:{borderRadius:"5px",backgroundColor:"#F6F6F6",borderColor:"#E0E0E0",width:"100%"},defaultValue:"**********",disabled:!0})]}),t(b,{direction:"row",alignItems:"center",children:[t(w,{fontSize:"16px",fontWeight:"400",color:"#898989",width:"31%",paddingRight:"8px",children:"Account Created On"}),t(w,{sx:{fontWeight:"400",fontSize:"16px",lineHeight:"21px",color:"#0f0f0f"},children:o?Le(new Date(o),"dd MMM yyyy"):""})]}),t(b,{direction:"row",alignItems:"center",children:[t(w,{fontSize:"16px",fontWeight:"400",color:"#898989",width:"31%",paddingRight:"8px",children:"Last Login"}),t(w,{sx:{fontWeight:"400",fontSize:"16px",lineHeight:"21px",color:"#0f0f0f"},children:i?Le(new Date(i),"dd MMM yyyy"):""})]})]}),t(b,{direction:"column",justifyContent:"space-between",sx:{my:"38px",height:"160px",pl:"8px"},children:t($n,{updateProfileHandler:s,firstName:e,lastName:r,email:a,username:n})})]})]})})})}function En(){var p,m;const{dispatch:e}=ne(),r=JSON.parse(localStorage.getItem("user")||""),{response:n,error:a,loading:i}=V({url:((p=l.model_objects_get)==null?void 0:p.url)+(r==null?void 0:r._id)+"?app_name=fastpanel.core.accounts&model_name=fastpaneluser",method:(m=l==null?void 0:l.model_objects_get)==null?void 0:m.method}),[o,s]=_({first_name:"",last_name:"",username:"",email:"",date_joined:"",last_login:""});j(()=>{n&&n.status===200&&s(n==null?void 0:n.data)},[n]);const{mutationResponse:d,mutationLoading:c,axiosFetch:h}=xe(),u=async({first_name:F,username:$,last_name:D,email:C})=>{var y,g;h({axiosInstance:U,method:(y=l==null?void 0:l.models_objects_patch)==null?void 0:y.method,url:`${(g=l==null?void 0:l.models_objects_patch)==null?void 0:g.url}${r==null?void 0:r._id}`,data:{data:{username:$,first_name:F,last_name:D,email:C},app_name:"fastpanel.core.accounts",model_name:"fastpaneluser"}})};return j(()=>{d&&d.status===200&&(s(d==null?void 0:d.data),e({type:"update_user",payload:{user:d==null?void 0:d.data}}),Y({severity:"success",title:"Profile Updated Successfully"}))},[d]),t(M,{elevation:0,sx:{height:"100%"},children:i?t(ae,{sx:{height:"calc(100% - 85px)"}}):t(E,{children:a?t(ce,{}):t(E,{children:t(Tn,{firstName:o==null?void 0:o.first_name,lastName:o==null?void 0:o.last_name,username:o==null?void 0:o.username,email:o==null?void 0:o.email,loading:i||c,updateProfile:u,createdOn:o==null?void 0:o.date_joined,lastLogin:o==null?void 0:o.last_login})})})})}const Pn=()=>t(b,{justifyContent:"center",alignItems:"center",width:"100%",children:t(f,{children:[t(w,{sx:{fontSize:"20px",lineHeight:"28px",fontWeight:"500",color:"#101828",textAlign:"center",mb:"8px"},children:"Delete Operation"}),t(w,{sx:{fontSize:"16px",lineHeight:"20px",fontWeight:"400",color:" #667085",textAlign:"center",mb:"32px"},children:"Are you sure you want to delete this record? This action cannot be undone."})]})}),On=({handleClose:e,handleDelete:r,isLoading:n})=>t(b,{direction:"row",justifyContent:"center",width:"100%",children:[t(W,{sx:{fontSize:"16px",fontWeight:"500",lineHeight:"24px",mr:"12px",py:"10px",borderRadius:"8px",width:"300px",maxWidth:"352px"},onClick:e,children:"Cancel"}),t(W,{sx:{fontSize:"16px",fontWeight:"500",lineHeight:"24px",py:"10px",borderRadius:"8px",width:"18.75rem",backgroundColor:"#d32f2f",":hover":{backgroundColor:"#b72418"},maxWidth:"352px"},onClick:r,disabled:n,children:"Delete"})]});function Rn({open:e,handleClose:r,handleDelete:n,isLoading:a}){return t(Ae,{dialogProps:{open:e,onClose:()=>{},fullWidth:!0,maxWidth:"xs"},dialogContentChild:t(Pn,{}),dialogActionChild:t(On,{handleDelete:n,isLoading:a,handleClose:r}),dialogContentProps:{sx:{mb:0}}})}function Wn(){var ie,$e,Te,Ee;const e=te(),{modelName:r,appName:n,objectId:a}=ge(),[i,o]=_(null),{response:s,loading:d}=V({url:`${(ie=l==null?void 0:l.model_objects_attribute_get)==null?void 0:ie.url}?app_name=${n}&model_name=${r}`,method:($e=l==null?void 0:l.model_objects_attribute_get)==null?void 0:$e.method}),[c,h]=_({}),[u,p]=_(),[m,F]=_(!1),$=()=>{F(!1)},{response:D,error:C,loading:y}=V({url:`${(Te=l==null?void 0:l.model_objects_get)==null?void 0:Te.url}${a}?app_name=${n}&model_name=${r}`,method:(Ee=l==null?void 0:l.model_objects_get)==null?void 0:Ee.method}),g=ye([]),x=et(v=>{v&&(g.current=Array.from(new Set([...g.current,v])))},[]),{mutationLoading:k,axiosFetch:S,mutationResponse:T}=xe(),Z=ye(null);j(()=>{var v,A;s&&Object.keys((v=s==null?void 0:s.data)==null?void 0:v.properties).length>0&&o(Object.entries((A=s.data)==null?void 0:A.properties).map(([O,le])=>({fieldName:O,...le})).filter(O=>(O==null?void 0:O.fieldName)!=="id"&&(O==null?void 0:O.fieldName)!=="_id"))},[s]),j(()=>{D&&h(D.data)},[D]),j(()=>{Object.keys(c).length&&(i!=null&&i.length)&&p(()=>i.map(v=>{if(v.properties&&v.bsonType==="object")for(let A in c[v==null?void 0:v.fieldName])v.properties={...v.properties,[A]:{...v.properties[A],value:c[v==null?void 0:v.fieldName][A]}};return{value:c[v==null?void 0:v.fieldName],...v}}).filter(v=>{const A=Object.keys(v)[0];return A!=="id"&&A!=="_id"&&A!=="password"}))},[i,c]);const J=v=>{var le,Pe;v.preventDefault();const A=ut(g.current,u),O=en(A==null?void 0:A.data,c);A!=null&&A.error?Y({severity:"error",title:A==null?void 0:A.error}):S({axiosInstance:U,method:(le=l==null?void 0:l.models_objects_patch)==null?void 0:le.method,url:`${(Pe=l==null?void 0:l.models_objects_patch)==null?void 0:Pe.url}${a}`,data:{data:O,app:n,model:r}})},P=v=>{var A,O;v.preventDefault(),S({axiosInstance:U,method:(A=l==null?void 0:l.models_objects_delete)==null?void 0:A.method,url:`${(O=l==null?void 0:l.models_objects_delete)==null?void 0:O.url}${a}?app_name=${n}&model_name=${r}`})};return j(()=>{T&&T.status===200&&(Y({severity:"success",title:"Record Successfully Updated"}),h(T.data)),T&&T.status===204&&(Y({severity:"success",title:"Record Successfully Deleted"}),e(`${n}/models/${r}`))},[T]),t(E,{children:d?t(ae,{sx:{height:"calc(100% - 85px)"}}):t(M,{sx:{p:2,maxWidth:"clamp(300px,100%,400px)"},elevation:0,children:[C?t(ce,{}):t("form",{ref:Z,children:[t(f,{sx:{borderRadius:"8px",mt:".5rem"},children:u&&u.map((v,A)=>t(Ne,{fieldInfo:v,setFormElements:x,mode:"edit"},A))}),t(b,{direction:"row",mt:2,gap:2,children:[t(W,{disabled:k,onClick:J,children:"Save"}),t(W,{disabled:k,onClick:()=>F(!0),sx:{backgroundColor:"#D92D20",":hover":{backgroundColor:"#b72418"}},children:"Delete"})]})]}),t(Rn,{handleClose:$,handleDelete:P,open:m,isLoading:y})]})})}function Ln({children:e}){const{user:r}=ne();return t(E,{children:r.isAuthenticated?t(Ke,{}):t(rt,{to:N.login})})}const Mn=()=>t(pr,{children:t(hr,{children:[t(H,{element:t(Ln,{}),children:t(H,{path:`${N.root}`,element:t(zr,{}),children:[t(H,{index:!0,element:t(wn,{}),path:N.apps}),t(H,{exact:!0,element:t(Dn,{}),path:N.models}),t(H,{exact:!0,element:t(_n,{}),path:N==null?void 0:N.model}),t(H,{exact:!0,element:t(Wn,{}),path:N==null?void 0:N.modelObjectEdit}),t(H,{exact:!0,element:t(En,{}),path:N==null?void 0:N.profile})]})}),t(H,{exact:!0,element:t(jn,{}),path:N.login}),t(H,{element:t("h2",{children:"Page Not Found"}),path:"*"})]})}),zn=nt({palette:{mode:"light",sidebar:{dark:"#111827"},navitem:{hover:"#242a38"},primary:{main:"#2f7ec7",hover:"#f7fafd"},danger:{main:"#D92D20",hover:"#c5261a"},white:{main:"#fff"},sky_blue:{main:"#edeff2"},text:{white:"#fff",grey:"#8a8a8a",black:"#000000"},customGrey:{grey1:"#f7f7f7",main:"#ddd"},shadow:{main:"rgba(0, 0, 0, 0.04)"}},typography:{fontFamily:["Inter,sans-serif"]}});nt({palette:{mode:"dark"},typography:{fontFamily:["Inter,sans-serif"]}});function qn({children:e}){return t(gr,{theme:zn,children:t(Lr,{children:t(Or,{children:[e,t(mr,{style:{width:"400px"},limit:5,position:"top-center",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"})]})})})}function Hn(){return t(qn,{children:t(Mn,{})})}xr(t(Hn,{}),document.getElementById("app"));
